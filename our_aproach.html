<!--  -->
<!DOCTYPE html>
<link id="menu-css" rel="stylesheet" href="/css/components/menu-header.css" />

<link id="menu-css" rel="stylesheet" href="/css/Our_Aproach.css" />

<html lang="es">
  <head>
    <title data-i18n="menu contact"></title>

    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- GSAP (√∫ltima versi√≥n estable) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.14.0/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.14.0/ScrollTrigger.min.js"></script>

    <!-- Otros scripts y librer√≠as -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fontfaceobserver/2.1.0/fontfaceobserver.standalone.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <script type="module" src="/js/demo4/traduction.js"></script>

    <!-- Estilos -->

    <!-- Clase JS activa en HTML -->
    <script>
      document.documentElement.className = "js";
    </script>
  </head>

  <body>
    <!-- Contenido principal -->
    <section class="hero">
      <video autoplay muted loop playsinline aria-hidden="true">
        <source src="/video/videoouraproach.mp4" type="video/mp4" />
        Tu navegador no soporta el elemento de video.
      </video>
      <div class="hero-text">
        <h1 data-i18n="our approach"></h1>
        <h2 data-i18n="our approach sub"></h2>
      </div>
    </section>

    <section class="list">
      <div class="phrase">
        <span class="pdp" data-i18n="infra_title"></span><br />
        <span data-i18n="infra_text"></span>
      </div>

      <div class="phrase">
        <span class="pdp" data-i18n="pipeline_title"></span><br />
        <span data-i18n="pipeline_text"></span>
      </div>

      <div class="phrase">
        <span class="pdp" data-i18n="ecosystem_title"></span><br />
        <span data-i18n="ecosystem_text"></span>
      </div>

      <div class="phrase">
        <span class="pdp" data-i18n="data_title"></span><br />
        <span data-i18n="data_text"></span>
      </div>
    </section>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <script>
      gsap.registerPlugin(ScrollTrigger);

      // Selecciona las frases dentro del contenedor .list
      const phrases = gsap.utils.toArray(".list .phrase");

      // Configuraci√≥n inicial
      gsap.set(phrases, { opacity: 0, y: 60, filter: "blur(6px)" });

      // La primera frase debe ser visible al inicio
      if (phrases[0])
        gsap.set(phrases[0], { opacity: 1, y: 0, filter: "blur(0px)" });

      // Duraciones de animaci√≥n
      const D_IN = 0.6, // entrada
        D_HOLD = 0.3, // espera antes de que salga
        D_OUT = 0.6; // salida

      // Timeline principal controlado por el scroll
      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: ".list",
          start: "top top",
          end: "+=" + phrases.length * window.innerHeight, // espacio por frase
          scrub: 0.85,
          pin: true,
          anticipatePin: 1,
          snap: 1 / (phrases.length - 1), // snap perfecto por frase
        },
      });

      // Construcci√≥n de la secuencia
      phrases.forEach((phrase, i) => {
        if (i === 0) {
          // La primera ya est√° visible, solo hacemos hold
          tl.to({}, { duration: D_HOLD });
        } else {
          // Animaci√≥n de entrada (fade + blur + slide)
          tl.fromTo(
            phrase,
            { opacity: 0, y: 60, filter: "blur(6px)" },
            {
              opacity: 1,
              y: 0,
              filter: "blur(0px)",
              duration: D_IN,
              ease: "power3.out",
              immediateRender: false, // ‚úÖ FIX para permitir reverse
            }
          );
        }

        // Animaci√≥n de salida (fade + slide up + blur)
        if (i < phrases.length - 1) {
          tl.to(
            phrase,
            {
              opacity: 0,
              y: -60,
              filter: "blur(6px)",
              duration: D_OUT,
              ease: "power3.in",
              immediateRender: false, // ‚úÖ NECESARIO para scroll up
            },
            "+=0.25" // peque√±o hold para ritmo
          );
        }
      });

      // Refrescar el trigger cuando cambie el viewport
      addEventListener("resize", () => ScrollTrigger.refresh());
      addEventListener("beforeunload", () => {
        ScrollTrigger.getAll().forEach((t) => t.kill());
        tl.kill();
      });
    </script>

    <section class="statement">
      <div id="content-row">
        <div class="content-text">
          <h2 data-i18n="we aim to"></h2>
          <div
            class="corner corner-bottom-left"
            data-svg="svg/cornner_bottom_left.svg"
          ></div>
          <div
            class="corner corner-top-right"
            data-svg="svg/cornner_top_right.svg"
          ></div>
        </div>
      </div>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script>
      window.addEventListener("DOMContentLoaded", () => {
        gsap.registerPlugin(ScrollTrigger);

        const bottomLeft = document.querySelector(".corner-bottom-left");
        const topRight = document.querySelector(".corner-top-right");
        const content = document.querySelector(".content-text");
        let tl;

        function getPositions() {
          const w = content.offsetWidth;
          const h = content.offsetHeight;

          // ‚è≥ breakpoint: m√≥vil 500px
          const isMobile = window.innerWidth <= 500;

          if (isMobile) {
            return {
              bottomLeft: { x: w / 10 - 15, y: h / 10 - 25 },
              topRight: { x: w - 40, y: -h - 3 },
              center: { x: w / 2 - 20, y: h / 2 - 20 },
            };
          }

          // ‚èπ posiciones normales (tu c√≥digo original)
          return {
            bottomLeft: { x: -50, y: -25 },
            topRight: { x: +w, y: -h - 65 },
            center: { x: w / 2 - 25, y: h / 2 - 25 },
          };
        }

        function animateCorners() {
          const pos = getPositions();

          gsap.set([bottomLeft, topRight], {
            position: "absolute",
            x: pos.center.x,
            y: pos.center.y,
            opacity: 0,
          });

          const tl = gsap.timeline({
            scrollTrigger: {
              trigger: ".statement",
              start: "top center",
              end: "bottom bottom",
              scrub: true,
            },
          });

          tl.to(bottomLeft, {
            x: pos.bottomLeft.x,
            y: pos.bottomLeft.y,
            opacity: 1,
            ease: "power3.out",
          }).to(
            topRight,
            {
              x: pos.topRight.x,
              y: pos.topRight.y,
              opacity: 1,
              ease: "power3.out",
            },
            "<"
          );

          return tl;
        }

        // Fade-in del texto
        gsap.fromTo(
          ".content-text",
          { opacity: 0.01 },
          {
            opacity: 1,
            scrollTrigger: {
              trigger: ".statement",
              start: "top center",
              end: "bottom bottom",
              scrub: true,
            },
          }
        );

        // iniciar despu√©s del delay
        setTimeout(() => {
          tl = animateCorners();
        }, 2000);

        // recalcular al hacer resize
        window.addEventListener("resize", () => {
          if (tl) {
            tl.kill();
            tl = animateCorners();
          }
        });
      });
    </script>

    <!-- <section class="list2">
    <div class="phrase2">
      <span class="pdp"   data-i18n="experimental +"></span> 

      <p data-i18n="data driven"></p>
      <br /><br />
      <span class="pdp" data-i18n="urban spaces"></span>

      <p data-i18n="public spaces"></p>
      <br /><br />

      <span class="pdp" data-i18n="mobility"></span>

      <p data-i18n="road safety"></p>

    </div>

    <div class="phrase2">


      <span class="pdp" data-i18n="housing"></span> 

      <p data-i18n="co-housing"></p>

      <br /><br />



      <span class="pdp" data-i18n="Materials and processes"></span> 

      <p data-i18n="Eco-friendly"></p>

      <br /><br />

      <span class="pdp" data-i18n="digital tools"></span> 

      <p data-i18n="data visualization"></p>
    </div>
  </section> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <script>
      gsap.registerPlugin(ScrollTrigger);

      // Seleccionamos todas las frases de la lista 2
      const phrases2 = gsap.utils.toArray(".list2 .phrase2");

      // Timeline general para el efecto de scroll
      let tl2 = gsap.timeline({
        scrollTrigger: {
          trigger: ".list2", // apuntamos a la secci√≥n correcta
          start: "top top",
          end: "+=" + phrases2.length * 2 * window.innerHeight, // usamos phrases2
          scrub: true,
          pin: true,
        },
      });

      // Animamos cada frase de manera secuencial
      phrases2.forEach((phrase, i) => {
        const fadeInTime = i * 2; // momento de fade in
        const fadeOutTime = fadeInTime + 1; // momento de fade out

        // Fade in: aparece desde abajo
        tl2.fromTo(
          phrase,
          { opacity: 0, y: 50 },
          { opacity: 1, y: 0, duration: 0.8, ease: "power3.out" },
          fadeInTime
        );

        // Fade out: desaparece hacia arriba
        tl2.to(
          phrase,
          { opacity: 0, y: -50, duration: 0.8, ease: "power3.in" },
          fadeOutTime
        );
      });
    </script>

    <!-- Otros scripts (si es necesario) -->
    <script src="/js/lenis.min.js"></script>
    <script src="/js/splitting.min.js"></script>
    <script type="module" src="/js/demo4/traduction.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // üé® Lista de colores posibles
        const colors = ["#18B2E8", "#F86230", "#A51C5B", "#9244D6"];
        let lastColor = null; // guardamos el √∫ltimo color usado

        // Seleccionamos todos los <span> y los <h2 class="white">
        const elements = document.querySelectorAll(".pdp, h2.white");

        elements.forEach((el) => {
          let randomColor;
          // Evita repetir el mismo color que el anterior
          do {
            randomColor = colors[Math.floor(Math.random() * colors.length)];
          } while (randomColor === lastColor);

          el.style.color = randomColor;
          lastColor = randomColor;
        });
      });
    </script>

    <!-- --^^^^^^^^^^^^^^^^^^^^^^^^^^--<todo esto es el menu>--^^^^^^^^^^^^^^^^^^^^^^^^^^^^-- -->
    <!-- --^^^^^^^^^^^^^^^^^^^^^^^^^^--<todo esto es el menu>--^^^^^^^^^^^^^^^^^^^^^^^^^^^^-- -->
    <!-- --^^^^^^^^^^^^^^^^^^^^^^^^^^--<todo esto es el menu>--^^^^^^^^^^^^^^^^^^^^^^^^^^^^-- -->

    <section class="contact-next-project">
      <!-- Newsletter -->
      <div class="newsletter-block">
        <h2 data-i18n="newsletter_title"></h2>
        <p data-i18n="newsletter_desc"></p>

        <form id="newsletter-form" novalidate>
          <label for="nm-email" data-i18n="newsletter_email_label"></label>
          <input
            id="nm-email"
            name="email"
            type="email"
            required
            data-i18n="newsletter_email_placeholder"
          />

          <label for="nm-name" data-i18n="newsletter_name_label"></label>
          <input
            id="nm-name"
            name="name"
            type="text"
            data-i18n="newsletter_name_placeholder"
          />

          <div class="policy">
            <input id="nm-policy" name="policy" type="checkbox" required />
            <label for="nm-policy">
              <span data-i18n="newsletter_policy_accept"></span>
              <a
                href="/politica-privacidad.html"
                target="_blank"
                rel="noopener"
                data-i18n="newsletter_policy_link"
              ></a>
            </label>
          </div>

          <button
            type="submit"
            class="newsletter-btn"
            data-i18n="newsletter_btn"
          ></button>

          <p id="nm-message" role="status" aria-live="polite"></p>
        </form>

        <!-- Redes sociales -->
        <div class="social" aria-label="Redes sociales">
          <a
            href="https://instagram.com/"
            target="_blank"
            rel="noopener"
            aria-label="Instagram"
          >
            <i class="fab fa-instagram"></i>
          </a>
          <a
            href="https://facebook.com/"
            target="_blank"
            rel="noopener"
            aria-label="Facebook"
          >
            <i class="fab fa-facebook"></i>
          </a>
          <a
            href="https://twitter.com/"
            target="_blank"
            rel="noopener"
            aria-label="Twitter"
          >
            <i class="fab fa-x-twitter"></i>
          </a>
          <a
            href="https://linkedin.com/"
            target="_blank"
            rel="noopener"
            aria-label="LinkedIn"
          >
            <i class="fab fa-linkedin"></i>
          </a>
        </div>
      </div>

      <!-- Sugerencia del siguiente proyecto -->
      <aside class="next-project-block">
        <h3 data-i18n="suggested_projects_title"></h3>

        <article class="project-card">
          <img
            src="/img/1x/Mesa de trabajo 3.png"
            alt="Miniatura proyecto siguiente"
          />
          <div class="project-card__body">
            <h4>Computer Visi√≥n</h4>
            <p>
              Configuraciones optimizadas para clima extremo y eficiencia
              energ√©tica.
            </p>
            <a
              href="#"
              class="btn project-card__link"
              data-i18n="project_card_link"
            ></a>
          </div>
        </article>
        <article class="project-card">
          <img
            src="/img/1x/Mesa de trabajo 2.png"
            alt="Miniatura proyecto siguiente"
          />
          <div class="project-card__body">
            <h4>Loroem Ipsum</h4>
            <p>
              Configuraciones optimizadas para clima extremo y eficiencia
              energ√©tica.
            </p>
            <a
              href="#"
              class="btn project-card__link"
              data-i18n="project_card_link"
            ></a>
          </div>
        </article>
      </aside>

      <script>
        (function () {
          const form = document.getElementById("newsletter-form");
          const email = document.getElementById("nm-email");
          const policy = document.getElementById("nm-policy");
          const msg = document.getElementById("nm-message");

          function show(message, ok = true) {
            msg.textContent = message;
            msg.style.color = ok ? "#0a0" : "#c00";
          }

          form.addEventListener("submit", function (e) {
            e.preventDefault();
            msg.textContent = "";

            if (!email.value || !/\S+@\S+\.\S+/.test(email.value)) {
              show("Introduce un correo v√°lido.", false);
              email.focus();
              return;
            }
            if (!policy.checked) {
              show("Debes aceptar la pol√≠tica de privacidad.", false);
              return;
            }

            const payload = {
              email: email.value.trim(),
              name: (document.getElementById("nm-name").value || "").trim(),
              acceptedPolicy: true,
              source: window.location.pathname,
            };

            fetch("/api/subscribe", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            })
              .then((resp) => {
                if (!resp.ok) throw new Error("network");
                return resp.json().catch(() => ({}));
              })
              .then(() => {
                show("Gracias por suscribirte. Revisa tu correo.", true);
                form.reset();
              })
              .catch(() => {
                try {
                  const pending = JSON.parse(
                    localStorage.getItem("newsletter_pending") || "[]"
                  );
                  pending.push(payload);
                  localStorage.setItem(
                    "newsletter_pending",
                    JSON.stringify(pending)
                  );
                } catch (err) {}
                show(
                  "Suscripci√≥n guardada localmente. Se intentar√° enviar cuando haya conexi√≥n.",
                  true
                );
                form.reset();
              });
          });
        })();
      </script>
    </section>

    <div class="top-bar"></div>

    <div class="menu-placeholder" id="menu-placeholder"></div>

    <script>
      fetch("/menu.html")
        .then((response) => {
          if (!response.ok) {
            throw new Error(
              `Error al cargar el men√∫: ${response.status} ${response.statusText}`
            );
          }
          return response.text();
        })
        .then((data) => {
          const placeholder = document.getElementById("menu-placeholder");
          if (!placeholder) {
            throw new Error(
              "Elemento con id 'menu-placeholder' no encontrado en el DOM"
            );
          }
          placeholder.innerHTML = data;

          // Cargar el script despu√©s de que el men√∫ est√© en el DOM
          const script = document.createElement("script");
          script.src = "/js/demo4/menu.js";
          script.onload = () => console.log("menu.js cargado correctamente ‚úÖ");
          script.onerror = () =>
            console.error("Error al cargar /js/demo4/menu.js ‚ùå");
          document.body.appendChild(script);

          // üëá Vuelve a ejecutar traducci√≥n despu√©s de insertar el men√∫
          if (window.applyTranslations) {
            window.applyTranslations();
          }
        })
        .catch((error) => {
          console.error("Ocurri√≥ un error al cargar el men√∫:", error);
        });
    </script>

    <a href="index.html">
      <div class="secundary-brand"></div>
    </a>
    <script>
      const container = document.querySelector(".secundary-brand");
      fetch("/svg/indi-lab_Vertical_Animate.svg")
        .then((response) => response.text())
        .then((svgText) => {
          container.innerHTML = svgText;
        })
        .catch((err) => console.error("Error cargando SVG:", err));
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll("[data-svg]").forEach((el) => {
          const svgPath = el.getAttribute("data-svg");
          fetch(svgPath)
            .then((res) => res.text())
            .then((svgContent) => {
              el.innerHTML = svgContent;
            })
            .catch((err) => console.error("Error cargando SVG:", err));
        });
      });
    </script>

    <script>
      gsap.registerPlugin(ScrollTrigger);

      // Animaci√≥n inicial hero
      gsap.from(".hero-text h2", {
        opacity: 0,
        y: 50,
        duration: 1.5,
        ease: "power3.out",
      });

      gsap.from(".hero img", {
        scale: 1.2,
        duration: 3,
        ease: "power2.out",
      });

      // Animaci√≥n especial del logo
      gsap.from(".intro img", {
        scrollTrigger: {
          trigger: ".intro img",
          start: "top 80%",
        },
        opacity: 0, // aparece suavemente
        y: 30, // sube un poco desde abajo
        scale: 0.95, // peque√±o escalado para profundidad
        duration: 1.5, // tiempo de animaci√≥n
        ease: "power2.out", // movimiento elegante y natural
      });
    </script>
  </body>
</html>
