<!--  -->
<!DOCTYPE html>
<link id="menu-css" rel="stylesheet" href="/css/who-we-are.css" />
<link id="menu-css" rel="stylesheet" href="/css/components/menu-header.css">

<html lang="es">

<head>    
<link rel="icon" type="image/x-icon" href="/favicon.ico">


  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet" />
  <meta charset="UTF-8" />
  <title>Vivienda Modular</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- GSAP (√∫ltima versi√≥n estable) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.14.0/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.14.0/ScrollTrigger.min.js"></script>

  <!-- Otros scripts y librer√≠as -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fontfaceobserver/2.1.0/fontfaceobserver.standalone.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Estilos -->
  <script type="module" src="js/demo4/traduction.js"></script>

  <!-- Clase JS activa en HTML -->
  <script>
    document.documentElement.className = "js";
  </script>

</head>

<body>


  <!-- Contenido principal -->
  <section class="hero">
    <img src="/img/pexels-vividcafe-681335.jpg" alt="full image" />
    <div class="hero-text">
      <h1 data-i18n="who we are"> </h1>
      <h2 data-i18n="who we are sub">
      </h2>
    </div>
  </section>

  <section class="intro">
    <p>
      <span data-i18n="who mwe are intro"></span>
      <span class="pdp" data-i18n="who mwe are spam"></span>
      <span data-i18n="who we are text"></span>
    </p>

    <div class="secundary-logo">
      <div class="indi-lab-logo" data-svg="svg/Secundary_Brand.svg"></div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll("[data-svg]").forEach(el => {
          const svgPath = el.getAttribute("data-svg");
          fetch(svgPath)
            .then(res => res.text())
            .then(svgContent => {
              el.innerHTML = svgContent;
            })
            .catch(err => console.error("Error cargando SVG:", err));
        });
      });
    </script>
  </section>













































  <section class="statement">
    <div id="content-row">
      <div class="content-text">
        <h2 data-i18n="We design prototype"></h2>
        <div class="corner corner-bottom-left" data-svg="svg/cornner_bottom_left.svg"></div>
        <div class="corner corner-top-right" data-svg="svg/cornner_top_right.svg"></div>
      </div>
    </div>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script>
    window.addEventListener("DOMContentLoaded", () => {
      gsap.registerPlugin(ScrollTrigger);

      const bottomLeft = document.querySelector(".corner-bottom-left");
      const topRight = document.querySelector(".corner-top-right");
      const content = document.querySelector(".content-text");
      let tl; // üëà declarar antes de usar

      function getPositions() {
        const w = content.offsetWidth;
        const h = content.offsetHeight;

        return {
          bottomLeft: { x: -50, y: - h + 95 },
          topRight: { x: + w, y: -h - 65 },
          center: { x: w / 2 - 25, y: h / 2 - 25 }
        };
      }

      function animateCorners() {
        const pos = getPositions();

        gsap.set([bottomLeft, topRight], {
          position: "absolute",
          x: pos.center.x,
          y: pos.center.y,
          opacity: 0
        });

        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: ".statement",
            start: "top center",
            end: "bottom bottom",
            scrub: true,
          }
        });

        tl.to(bottomLeft, {
          x: pos.bottomLeft.x,
          y: pos.bottomLeft.y,
          opacity: 1,
          ease: "power3.out"
        }).to(topRight, {
          x: pos.topRight.x,
          y: pos.topRight.y,
          opacity: 1,
          ease: "power3.out"
        }, "<");

        return tl;
      }

      // Fade-in del texto
      gsap.fromTo(".content-text",
        { opacity: 0.01 },
        {
          opacity: 1,
          scrollTrigger: {
            trigger: ".statement",
            start: "top center",
            end: "bottom bottom",
            scrub: true,
          }
        }
      );

      // ‚ö° iniciar con delay de 2s
      setTimeout(() => {
        tl = animateCorners();
      }, 2000);

      // recalcular al hacer resize
      window.addEventListener("resize", () => {
        if (tl) {
          tl.kill();
          tl = animateCorners();
        }
      });
    });
  </script>













































  <section class="list">
    <div class="phrase">
      <span class="pdp" data-i18n="Scalable solutions"></span> <span data-i18n="Scalable solutions text"></span>
    </div>
    <div class="phrase">

      <span class="pdp" data-i18n="Civic tech and gov tech ventures"></span> <span
        data-i18n="Civic tech and gov tech ventures text"></span>


    </div>
    <div class="phrase">

      <span class="pdp" data-i18n="Applied research, data analysis, and strategic studies"></span> <span
        data-i18n="Applied research, data analysis, and strategic studies text"></span>
    </div>
  </section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<script>
  gsap.registerPlugin(ScrollTrigger);

  const phrases = gsap.utils.toArray(".list .phrase");

  // Estado base: todas ocultas, pero la primera visible desde el inicio
  gsap.set(phrases, { opacity: 0, y: 60, filter: "blur(6px)" });
  if (phrases[0]) gsap.set(phrases[0], { opacity: 1, y: 0, filter: "blur(0px)" });

  const tl = gsap.timeline({
    scrollTrigger: {
      trigger: ".list",
      start: "top top",
      end: "+=" + phrases.length * window.innerHeight, // espacio por frase
      scrub: 0.8,
      pin: true,
      anticipatePin: 1,
      // Garantiza que la primera est√© visible cuando se fija
      onEnter: () => phrases[0] && gsap.set(phrases[0], { opacity: 1, y: 0, filter: "blur(0px)" }),
      onEnterBack: () => phrases[0] && gsap.set(phrases[0], { opacity: 1, y: 0, filter: "blur(0px)" }),
      // Snap a cada frase con precisi√≥n
      snap: {
        snapTo: (value) => {
          const snaps = phrases.map((_, i) => i / (phrases.length - 1));
          return snaps.reduce((a, b) => Math.abs(b - value) < Math.abs(a - value) ? b : a);
        },
        duration: 0.5,
        ease: "power2.inOut"
      },
      markers: false
    }
  });

  const D_IN = 0.6, D_HOLD = 0.3, D_OUT = 0.6;

  phrases.forEach((phrase, i) => {
    // La primera ya est√° visible: solo ‚Äúhold‚Äù antes de salir
    if (i === 0) {
      tl.to({}, { duration: D_HOLD }); // peque√±o respiro inicial
    } else {
      // Evita que la primera se renderice en 0 con immediateRender:false
      tl.fromTo(phrase,
        { opacity: 0, y: 60, filter: "blur(6px)" },
        { opacity: 1, y: 0, filter: "blur(0px)", duration: D_IN, ease: "power3.out", immediateRender: false }
      );
    }

    // Todas menos la √∫ltima se desvanecen para dar paso a la siguiente
    if (i < phrases.length - 1) {
      tl.to(phrase, { opacity: 0, y: -60, filter: "blur(6px)", duration: D_OUT, ease: "power3.in" }, "+=0.2");
    }
  });

  // Mantenimiento
  addEventListener("resize", () => ScrollTrigger.refresh());
  addEventListener("beforeunload", () => {
    ScrollTrigger.getAll().forEach(t => t.kill());
    tl.kill();
  });
</script>



  <section class="closing">



    <p class="text-large_w" data-i18n="by into Grupo INDI‚Äôs"></p>
    </div>
    </div>

    <div class="navigation-arrows-whatwedo">

      <a href="/our_aproach.html" class="our-projects">
        <img src="svg/brand_icon_right.svg" alt="Brand Icon Back" class="brand-icon-back" />
        <h3 data-i18n="menu contact"></h3>
      </a>
    </div>
  </section>




  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    // Animaci√≥n inicial hero
    gsap.from(".hero-text h2", {
      opacity: 0,
      y: 50,
      duration: 1.5,
      ease: "power3.out",
    });

    gsap.from(".hero img", {
      scale: 1.2,
      duration: 3,
      ease: "power2.out",
    });

    // Animaci√≥n especial del logo
    gsap.from(".intro img", {
      scrollTrigger: {
        trigger: ".intro img",
        start: "top 80%",
      },
      opacity: 0, // aparece suavemente
      y: 30, // sube un poco desde abajo
      scale: 0.95, // peque√±o escalado para profundidad
      duration: 1.5, // tiempo de animaci√≥n
      ease: "power2.out", // movimiento elegante y natural
    });
  </script>

  <!-- Otros scripts (si es necesario) -->
  <script src="/js/lenis.min.js"></script>
  <script src="/js/splitting.min.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // üé® Lista de colores posibles
    const colors = ["#18B2E8", "#F86230", "#A51C5B", "#9244D6"];
    let lastColor = null; // guardamos el √∫ltimo color usado

    // Seleccionamos todos los <span> y los <h2 class="white">
    const elements = document.querySelectorAll(".pdp, h2.white");

    elements.forEach((el) => {
      let randomColor;
      // Evita repetir el mismo color que el anterior
      do {
        randomColor = colors[Math.floor(Math.random() * colors.length)];
      } while (randomColor === lastColor);

      el.style.color = randomColor;
      lastColor = randomColor;
    });
  });
</script>






  <!-- Logo -->
  <a href="index.html">
    <div class="secundary-brand"></div>
  </a>
  <script>
    const container = document.querySelector(".secundary-brand");
    fetch("/svg/indi-lab_Vertical_Animate.svg")
      .then((response) => response.text())
      .then((svgText) => {
        container.innerHTML = svgText;
      })
      .catch((err) => console.error("Error cargando SVG:", err));
  </script>


  <!-- --^^^^^^^^^^^^^^^^^^^^^^^^^^--<todo esto es el menu>--^^^^^^^^^^^^^^^^^^^^^^^^^^^^-- -->
  <!-- --^^^^^^^^^^^^^^^^^^^^^^^^^^--<todo esto es el menu>--^^^^^^^^^^^^^^^^^^^^^^^^^^^^-- -->
  <!-- --^^^^^^^^^^^^^^^^^^^^^^^^^^--<todo esto es el menu>--^^^^^^^^^^^^^^^^^^^^^^^^^^^^-- -->




  <div class="menu-placeholder" id="menu-placeholder"></div>

  <script>
    fetch('/menu.html')
      .then(response => {
        if (!response.ok) {
          throw new Error(`Error al cargar el men√∫: ${response.status} ${response.statusText}`);
        }
        return response.text();
      })
      .then(data => {
        const placeholder = document.getElementById('menu-placeholder');
        if (!placeholder) {
          throw new Error("Elemento con id 'menu-placeholder' no encontrado en el DOM");
        }
        placeholder.innerHTML = data;

        // Cargar el script despu√©s de que el men√∫ est√© en el DOM
        const script = document.createElement('script');
        script.src = "/js/demo4/menu.js";
        script.onload = () => console.log("menu.js cargado correctamente ‚úÖ");
        script.onerror = () => console.error("Error al cargar /js/demo4/menu.js ‚ùå");
        document.body.appendChild(script);

        // üëá Vuelve a ejecutar traducci√≥n despu√©s de insertar el men√∫
        if (window.applyTranslations) {
          window.applyTranslations();
        }
      })
      .catch(error => {
        console.error("Ocurri√≥ un error al cargar el men√∫:", error);
      });
  </script>


</body>

</html>